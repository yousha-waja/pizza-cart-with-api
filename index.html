<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pizza Pamphlet</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script src="./cart.js"></script>

    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="container" x-data="counter">
    <header>Perfect Pizza</header>
    <p style="background-color: rgb(255, 183, 0); margin-bottom: 0.3em">
      Click on specific size pizza icon to view flavours!
    </p>
    <main>
      <div
        class="small d-flex flex-column align-items-center justify-content-center"
      >
        <h2>Small Pizzas</h2>
        <button
          class="btn btn-primary my-auto"
          title="Click here to view menu for small pizzas."
          x-on:click="visibleS = !visibleS"
        ></button>
      </div>
      <div
        class="medium d-flex flex-column align-items-center justify-content-center"
      >
        <h2>Medium Pizzas</h2>
        <button
          class="btn btn-primary my-auto"
          title="Click here to view menu for medium pizzas."
          x-on:click="visibleM = !visibleM"
        ></button>
      </div>
      <div
        class="large d-flex flex-column align-items-center justify-content-center"
      >
        <h2>Large Pizzas</h2>
        <button
          class="btn btn-primary my-auto"
          title="Click here to view menu for large pizzas."
          x-on:click="visibleL = !visibleL"
        ></button>
      </div>
    </main>

    <!--Menu for Small pizza-->
    <div class="container text-center menu" x-show="visibleS">
      <h2>Small Pizzas:</h2>
      <div class="row row-cols-2">
        <template x-for="pizza in pizzas">
          <template x-if="pizza.size === 'small'">
            <div class="col-sm-4">
              <span x-text="pizza.flavour"></span>
              <span>: R<span x-text="pizza.price"></span></span><br />
              <button
                class="btn"
                @click="addPizza(pizza.id)"
                title="Add to your cart"
              >
                Add
              </button>
            </div>
          </template>
        </template>
      </div>
    </div>

    <!--Menu for Medium pizza-->
    <div class="container text-center menu" x-show="visibleM">
      <h2>Medium Pizzas:</h2>
      <div class="row row-cols-2">
        <template x-for="pizza in pizzas">
          <template x-if="pizza.size === 'medium'">
            <div class="col-sm-4">
              <span x-text="pizza.flavour"></span>
              <span>: R<span x-text="pizza.price"></span></span><br />
              <button
                class="btn"
                @click="addPizza(pizza.id)"
                title="Add to your cart"
              >
                Add
              </button>
            </div>
          </template>
        </template>
      </div>
    </div>

    <!--Menu for Large pizza-->
    <div class="container text-center menu" x-show="visibleL">
      <h2>Large Pizzas:</h2>
      <div class="row row-cols-2">
        <template x-for="pizza in pizzas">
          <template x-if="pizza.size === 'large'">
            <div class="col-sm-4">
              <span x-text="pizza.flavour"></span>
              <span>: R<span x-text="pizza.price"></span></span><br />
              <button
                class="btn"
                @click="addPizza(pizza.id)"
                title="Add to your cart"
              >
                Add
              </button>
            </div>
          </template>
        </template>
      </div>
    </div>

    <div class="cart" x-show="!!total">
      <div>
        <table class="tables">
          <thead x-show="true">
            <tr>
              <th colspan="5" style="text-align: center">Shopping Cart</th>
            </tr>
            <tr>
              <th class="text-center">Price</th>
              <th class="text-center">Size</th>
              <th class="text-center">Flavour</th>
              <th class="text-center">Quantity</th>
              <th class="text-center">Total</th>
            </tr>
          </thead>
          <tbody>
            <template x-for="pizza in cart">
              <tr>
                <td class="text-center" x-html="pizza.price">R60</td>
                <td class="text-center" x-html="pizza.size">Small</td>
                <td class="text-center" x-html="pizza.flavour">Peri peri</td>
                <td class="text-center">
                  <button @click="addPizza(pizza.id)">+</button>
                  <span x-text="pizza.qty"></span>
                  <button @click="removePizza(pizza.id)">-</button>
                </td>
                <td class="text-center">
                  R<span style="display: inline" x-html="pizza.total.toFixed(2)"
                    >0</span
                  >
                </td>
              </tr>
            </template>
          </tbody>
          <tr x-show="true">
            <td colspan="4" class="text-center">Total:</td>
            <td class="text-center">
              R
              <div style="display: inline" x-html="total.toFixed(2)"></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="text-end">
        <button
          style="background-color: rgb(216, 147, 9)"
          x-on:click="amountPaid(payment)"
          x-bind:disabled="!isInputValid"
        >
          Checkout
        </button>
        <input
          type="number"
          pattern="[0-9]*"
          x-show="true"
          x-model="payment"
          x-on:input="isInputValid = !!payment"
          required
        />
        <p
          style="text-align: center; color: rgb(216, 147, 9)"
          x-html="message"
        ></p>
        <button
          style="background-color: rgba(216, 9, 9, 0.699)"
          x-on:click="createCart()"
        >
          Clear cart!
        </button>
      </div>
    </div>
    <footer>
      <div id="contact">
        <p>
          <i class="fab fa-twitter"></i>/ <i class="fab fa-instagram"></i> /
          <i class="fab fa-facebook"></i>: @<a href="#">Perfect_Pizza</a>
        </p>
        <span>
          <i class="fas fa-mobile-alt"></i>: <a href="#">(021)-541-1000</a>
        </span>
      </div>
      <a href="#" id="address">
        <img src="images/location icon.jpeg" alt="location icon" />
        <p>Pizza Plaza<br />Dough Road<br />Base Town</p>
      </a>
    </footer>
  </body>
</html>
